#include "OS.h"
#include "Exception.h"


namespace App
{

// ---------------------------------------------------------------------------------------------------------------------
//
#ifdef __linux__ 
//
// ---------------------------------------------------------------------------------------------------------------------

#include <signal.h>

// ---------------------------------------------------------------------------------------------------------------------
void RegisterSigInt(void (*pHandler)(int))
{
    static struct sigaction sa;
    sa.sa_handler = pHandler;
    sigemptyset(&sa.sa_mask);
    sa.sa_flags = 0;

    if (sigaction(SIGINT, &sa, nullptr) == -1) {
        throw Core::Exception("Couldn't register a handler for SIGINT");
    }
}

// ---------------------------------------------------------------------------------------------------------------------
//
#endif // !__linux__
//
// ---------------------------------------------------------------------------------------------------------------------

} // !App
